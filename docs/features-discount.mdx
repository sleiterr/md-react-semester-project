---\ntitle: Rabatkoder\ndescription: Implementering af rabatkoder og discount-system\n---\n\n# üéÅ Rabatkoder\n\n## Rabatkode System\n\nWebshoppen skal support flere rabatkoder med forskellige rabattyper.\n\n## Rabatkoder Database\n\nDefin√©r gyldige koder (typisk p√• backend, men for demo i useState):\n\n```jsx\nconst validDiscountCodes = {\n  'SAVE10': {\n    type: 'percentage',\n    value: 10,  // 10%\n    description: '10% rabat p√• alle produkter'\n  },\n  'SAVE20': {\n    type: 'percentage',\n    value: 20,  // 20%\n    description: '20% rabat p√• alle produkter'\n  },\n  'FREESHIP': {\n    type: 'fixed',\n    value: 50,  // 50 DKK\n    description: 'Gratis fragt (sparer 50 DKK)'\n  },\n  'LUCKY50': {\n    type: 'fixed',\n    value: 50,  // 50 DKK\n    description: '50 DKK rabat'\n  }\n}\n```\n\n## Context.jsx - Discount Logic\n\n```jsx\nimport { useState } from 'react'\n\nfunction ShopContext() {\n  const [discountCode, setDiscountCode] = useState('')\n  const [discountAmount, setDiscountAmount] = useState(0)\n  const [discountError, setDiscountError] = useState('')\n  \n  const validDiscountCodes = {\n    'SAVE10': { type: 'percentage', value: 10 },\n    'SAVE20': { type: 'percentage', value: 20 },\n    'FREESHIP': { type: 'fixed', value: 50 },\n    'LUCKY50': { type: 'fixed', value: 50 }\n  }\n  \n  const applyDiscountCode = (code, cartTotal) => {\n    const upperCode = code.toUpperCase().trim()\n    \n    // Check if code exists\n    if (!validDiscountCodes[upperCode]) {\n      setDiscountError('Ugyldig rabatkode')\n      setDiscountAmount(0)\n      return false\n    }\n    \n    // Calculate discount\n    const discount = validDiscountCodes[upperCode]\n    let amount = 0\n    \n    if (discount.type === 'percentage') {\n      amount = (cartTotal * discount.value) / 100\n    } else if (discount.type === 'fixed') {\n      amount = discount.value\n    }\n    \n    // Don't discount more than total\n    if (amount > cartTotal) {\n      amount = cartTotal\n    }\n    \n    setDiscountCode(upperCode)\n    setDiscountAmount(amount)\n    setDiscountError('')\n    return true\n  }\n  \n  const removeDiscountCode = () => {\n    setDiscountCode('')\n    setDiscountAmount(0)\n    setDiscountError('')\n  }\n  \n  return {\n    discountCode,\n    discountAmount,\n    discountError,\n    applyDiscountCode,\n    removeDiscountCode\n  }\n}\n```\n\n## DiscountCode.jsx - Komponent\n\n```jsx\nimport { useState, useContext } from 'react'\nimport { ShopContext } from '../../Context/Context'\nimport styles from './DiscountCode.module.css'\n\nfunction DiscountCode({ cartTotal }) {\n  const [inputCode, setInputCode] = useState('')\n  const { discountCode, discountAmount, discountError, applyDiscountCode, removeDiscountCode } = useContext(ShopContext)\n  \n  const handleApply = (e) => {\n    e.preventDefault()\n    if (inputCode.trim()) {\n      applyDiscountCode(inputCode, cartTotal)\n      setInputCode('')  // Clear input\n    }\n  }\n  \n  const handleRemove = () => {\n    removeDiscountCode()\n    setInputCode('')\n  }\n  \n  return (\n    <div className={styles.discountSection}>\n      <h3>Rabatkode</h3>\n      \n      {!discountCode ? (\n        <form onSubmit={handleApply}>\n          <div className={styles.inputGroup}>\n            <input\n              type=\"text\"\n              placeholder=\"Skriv rabatkode...\"\n              value={inputCode}\n              onChange={(e) => setInputCode(e.target.value)}\n              className={discountError ? styles.error : ''}\n            />\n            <button type=\"submit\">Anvend</button>\n          </div>\n          {discountError && <p className={styles.error}>{discountError}</p>}\n        </form>\n      ) : (\n        <div className={styles.applied}>\n          <p className={styles.success}>‚úì Kode anv.ndt: <strong>{discountCode}</strong></p>\n          <p className={styles.amount}>Rabat: -{discountAmount} DKK</p>\n          <button onClick={handleRemove} className={styles.removeBtn}>\n            Fjern kode\n          </button>\n        </div>\n      )}\n      \n      <details className={styles.help}>\n        <summary>Se eksempler p√• rabatkoder</summary>\n        <ul>\n          <li><code>SAVE10</code> - 10% rabat</li>\n          <li><code>SAVE20</code> - 20% rabat</li>\n          <li><code>FREESHIP</code> - Gratis fragt</li>\n          <li><code>LUCKY50</code> - 50 DKK rabat</li>\n        </ul>\n      </details>\n    </div>\n  )\n}\n\nexport default DiscountCode\n```\n\n## CSS - DiscountCode.module.css\n\n```css\n.discountSection {\n  margin: 1rem 0;\n  padding: 1rem;\n  background: #f9f9f9;\n  border-radius: 8px;\n  border: 1px solid #eee;\n}\n\n.discountSection h3 {\n  margin: 0 0 1rem 0;\n  font-size: 1rem;\n}\n\n.inputGroup {\n  display: flex;\n  gap: 0.5rem;\n}\n\n.inputGroup input {\n  flex: 1;\n  padding: 0.75rem;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\n.inputGroup input.error {\n  border-color: #ff4444;\n  background: #ffe6e6;\n}\n\n.inputGroup button {\n  padding: 0.75rem 1.5rem;\n  background: #333;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.inputGroup button:hover {\n  background: #555;\n}\n\n.error {\n  color: #ff4444;\n  font-size: 0.9rem;\n  margin-top: 0.5rem;\n}\n\n.applied {\n  padding: 1rem;\n  background: #e6ffe6;\n  border-radius: 4px;\n  border: 1px solid #90ee90;\n}\n\n.success {\n  color: #228b22;\n  margin: 0 0 0.5rem 0;\n}\n\n.amount {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #228b22;\n  margin: 0 0 0.75rem 0;\n}\n\n.removeBtn {\n  padding: 0.5rem 1rem;\n  background: #ff4444;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n\n.removeBtn:hover {\n  background: #ff6666;\n}\n\n.help {\n  margin-top: 1rem;\n  cursor: pointer;\n}\n\n.help summary {\n  color: #666;\n  font-size: 0.9rem;\n  font-weight: bold;\n}\n\n.help ul {\n  padding: 0.75rem 0 0 1.5rem;\n  margin: 0.5rem 0 0 0;\n  font-size: 0.85rem;\n  color: #666;\n}\n\n.help li {\n  margin: 0.25rem 0;\n}\n\n.help code {\n  background: #f0f0f0;\n  padding: 0.2rem 0.4rem;\n  border-radius: 3px;\n  font-family: monospace;\n}\n```\n\n## Integrer i Summary.jsx\n\n```jsx\nimport DiscountCode from '../DiscountCode/DiscountCode'\n\nfunction Summary({ total }) {\n  const { discountAmount } = useContext(ShopContext)\n  const finalTotal = total - discountAmount\n  \n  return (\n    <div className={styles.summary}>\n      <DiscountCode cartTotal={total} />\n      \n      <div className={styles.row}>\n        <span>Subtotal:</span>\n        <span>{total} DKK</span>\n      </div>\n      \n      {discountAmount > 0 && (\n        <div className={styles.row}>\n          <span>Rabat:</span>\n          <span>-{discountAmount} DKK</span>\n        </div>\n      )}\n      \n      <hr />\n      \n      <div className={styles.row + ' ' + styles.total}>\n        <span>Total:</span>\n        <span>{finalTotal.toFixed(2)} DKK</span>\n      </div>\n    </div>\n  )\n}\n```\n\n## S√•dan tester du\n\n1. Tilf√∏j produkter til kurv\n2. G√• til `/cart`\n3. Skriv en af rabatkoderne:\n   - `SAVE10` (10% rabat)\n   - `SAVE20` (20% rabat)\n   - `FREESHIP` (50 DKK rabat)\n   - `LUCKY50` (50 DKK rabat)\n4. Klik \"Anvend\"\n5. Se rabatten blive beregnet\n\n---\n\n**N√¶ste:** L√¶s [GitHub & Publishing](/deployment) for at publicere dit projekt\n"